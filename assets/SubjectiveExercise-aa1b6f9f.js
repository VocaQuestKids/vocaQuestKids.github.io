import{D as p,E as m,F as i,m as n,M as c,L as h,N as g,O as w,G as d}from"./index-08b866fb.js";import{_ as Q,s as v,t as y}from"./VMenu-a9ba247a.js";import{V as L,a as l,b as V,c as _}from"./VSheet-0f480ee2.js";import{V as f}from"./VBtn-d2539ae2.js";const C={name:"SubjectExercise",watch:{selectedLevel:function(){this.loadJsonAndGenerateQuiz()}},data:()=>({vocabularyList:[],currentQuestionKor:null,currentQuestion:null,selectedLevel:["초급"],levels:["초급","중급","고급"],answer:"",hint:"",placeholder:"",questionType:""}),mounted(){this.loadJsonAndGenerateQuiz()},methods:{loadJsonAndGenerateQuiz(){fetch("/voca.json").then(e=>e.json()).then(e=>{this.vocabularyList=[];for(let t=0;t<this.selectedLevel.length;t++)for(let s=0;s<e.length;s++)this.selectedLevel[t]===e[s].type&&this.vocabularyList.push(e[s]);this.generateQuiz()}).catch(e=>{console.error("JSON 파일을 로드하는 중 오류가 발생했습니다:",e)})},generateQuiz(){if(this.vocabularyList.length===0){console.error("JSON 파일 로드 오류.");return}this.currentQuestion=this.vocabularyList[Math.floor(Math.random()*this.vocabularyList.length)],this.displayQuestion(this.currentQuestion)},displayQuestion(e){this.currentQuestionKor=e.kor,this.currentQuestion=e,this.questionType=this.currentQuestion.type,this.updateHint(),this.updatePlaceholder(),this.$refs.answer.focus()},checkAnswer(){this.$refs.answer.blur();const e=this.answer.toLowerCase().replace(/\s/g,""),t=this.currentQuestion.eng.toLowerCase().replace(/\s/g,"");e===t?this.$swal.fire({title:"정답입니다!",showConfirmButton:!1,timer:1e3,icon:"success"}):this.$swal.fire({title:"틀렸습니다.",text:"정답 : "+this.currentQuestion.eng,confirmButtonText:"닫기",focusDeny:!0,didOpen:()=>{document.querySelector(".swal2-confirm").focus()},icon:"error"}).then(s=>{s.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)}),this.answer="",this.generateQuiz()},isViewHint(){this.showHint()},showHint(){this.$swal.fire({title:"힌트",html:`<p>${this.hint}</p>`,confirmButtonText:"닫기",icon:"question"}).then(e=>{e.isConfirmed&&setTimeout(()=>{this.$refs.answer.focus()},300)})},updateHint(){this.currentQuestion.eng.length===1?this.hint="_":this.currentQuestion.eng.length>3?this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-2)+this.currentQuestion.eng[this.currentQuestion.eng.length-1]:this.hint=this.currentQuestion.eng[0]+" _ ".repeat(this.currentQuestion.eng.length-1),this.hint+=` (${this.currentQuestion.eng.length}글자)`},updatePlaceholder(){this.placeholder="_ ".repeat(this.currentQuestion.eng.length-1)+"_"},calculateFontSize(e){if(e===""||e===null||e===void 0)return!1;const t=6,s=3,a=e.length;if(a>t){const u=t/a;return`${s*u}rem`}return`${s}rem`}}},S={class:"questionTypeStyle"};function b(e,t,s,a,u,r){return p(),m(L,{class:"fill-height"},{default:i(()=>[n(y,{class:"align-center text-center fill-height"},{default:i(()=>[n(l,null,{default:i(()=>[n(V,{modelValue:e.selectedLevel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.selectedLevel=o),id:"selectedLevel",name:"selectedLevel",ref:"selectedLevel",items:e.levels,label:"레벨 선택",dense:"",outlined:"",chips:"",multiple:"","hide-details":"",color:"fontColor",onChange:r.loadJsonAndGenerateQuiz},null,8,["modelValue","items","onChange"])]),_:1}),n(v),n(l,{class:"questionWrapper"},{default:i(()=>[c("p",{class:"questionStyle",ref:"question",style:g({fontSize:r.calculateFontSize(e.currentQuestionKor)})},h(e.currentQuestionKor),5),c("p",S,"[ "+h(e.questionType)+" ] ",1)]),_:1}),n(_,{ref:"answer",modelValue:e.answer,"onUpdate:modelValue":t[1]||(t[1]=o=>e.answer=o),placeholder:e.placeholder,dense:"",variant:"outlined","hide-details":"",onKeyup:w(r.checkAnswer,["enter"]),color:"fontColor",class:"custom-input-field"},null,8,["modelValue","placeholder","onKeyup"]),n(l,{class:"btnWrapper"},{default:i(()=>[n(f,{class:"btn",onClick:r.isViewHint,color:"mainColor"},{default:i(()=>[d("힌트")]),_:1},8,["onClick"]),n(f,{class:"btn",onClick:t[2]||(t[2]=o=>r.checkAnswer()),color:"mainColor"},{default:i(()=>[d("확인")]),_:1})]),_:1}),n(l,{style:{height:"10vh"}})]),_:1})]),_:1})}const q=Q(C,[["render",b],["__scopeId","data-v-e24638a4"]]);export{q as default};
